{"version":3,"sources":["App.js","index.js"],"names":["App","svgRef","useRef","useEffect","fetch","then","response","json","result","renderD3","className","id","ref","data","svg","hasOwnProperty","color","d3","main","current","attr","treemapLayout","size","paddingOuter","root","sum","d","value","sort","a","b","height","div","append","style","selectAll","leaves","enter","name","category","x0","y0","x1","y1","parent","children","on","html","pageX","pageY","nodes","descendants","text","depth","colorConsoles","legend","domain","i","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mPA4BeA,MAvBf,WACE,IAAMC,EAASC,mBAYf,OAVAC,qBAAU,WACRC,MAAM,+FACHC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MACC,SAACG,GACCC,EAASD,EAAQP,SAMvB,yBAAKS,UAAU,aACb,wBAAIC,GAAG,SAAP,oBACA,wBAAIA,GAAG,eAAP,qDACA,yBAAKC,IAAKX,MASVQ,EAAW,SAACI,EAAMC,GACtB,GAAID,EAAKE,eAAe,QAAS,CAE/B,IAKIC,EAAQC,IAAgBA,KAOxBC,EAJQD,IAAUH,EAAIK,SACXC,KAAK,QARR,MASGA,KAAK,SAVP,KAaGA,KAAK,QAZT,MAaIA,KAAK,SAdR,KAeGA,KAAK,QAAS,QAG1BC,EAAgBJ,MAEpBI,EACGC,KAAK,CApBI,KADC,MAsBVC,aAAa,GAGhB,IAAIC,EAAOP,IAAaJ,GACVY,KAAI,SAAAC,GAAC,OAAIA,EAAEX,eAAe,SAAWW,EAAEC,MAAQ,KAC/CC,MAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAEC,OAASF,EAAEE,QAAUD,EAAEH,MAAQE,EAAEF,SAEhEN,EAAcG,GAEd,IAAIQ,EAAMf,IAAU,cAAcgB,OAAO,OACpBb,KAAK,QAAS,WACdA,KAAK,KAAM,WACXc,MAAM,UAAW,GAEtChB,EACCiB,UAAU,QACVtB,KAAKW,EAAKY,UACVC,QACAJ,OAAO,QACPb,KAAK,QAAS,QACdA,KAAK,aAAa,SAAAO,GAAK,OAAIA,EAAMd,KAAKyB,QACtClB,KAAK,iBAAiB,SAAAO,GAAK,OAAIA,EAAMd,KAAK0B,SAAWZ,EAAMd,KAAK0B,SAAW,KAC3EnB,KAAK,cAAc,SAAAO,GAAK,OAAIA,EAAMd,KAAKc,MAAQA,EAAMd,KAAKc,MAAQ,KAClEP,KAAK,KAAK,SAASM,GAAK,OAAOA,EAAEc,MACjCpB,KAAK,KAAK,SAASM,GAAK,OAAOA,EAAEe,MACjCrB,KAAK,SAAS,SAASM,GAAK,OAAOA,EAAEgB,GAAKhB,EAAEc,MAC5CpB,KAAK,UAAU,SAASM,GAAK,OAAOA,EAAEiB,GAAKjB,EAAEe,MAC7CrB,KAAK,QAAQ,SAAAO,GAAK,OAAIA,EAAMiB,OAAS5B,EAAMW,EAAMiB,OAAOC,UAAY,QACpEzB,KAAK,SAAU,SACf0B,GAAG,aAAa,SAAAnB,GACfK,EAAIE,MAAM,UAAW,IACrBF,EAAIe,KAAKpB,EAAMd,KAAKyB,KAAXX,kBACcA,EAAMd,KAAK0B,SADzBZ,eAEWA,EAAMd,KAAKc,OAC1BO,MAAM,OAASjB,IAAS+B,MAAS,MACjCd,MAAM,MAAQjB,IAASgC,MAAQ,GAAM,MAE1CjB,EAAIZ,KAAK,aAAcO,EAAMd,KAAKc,UAEnCmB,GAAG,cAAc,WAAQd,EAAIE,MAAM,UAAW,GAAGA,MAAM,MAAO,MAG/D,IAAIgB,EAAQjC,IAAUH,EAAIK,SACzBgB,UAAU,KACVtB,KAAKW,EAAK2B,eACVd,QACAJ,OAAO,KACPb,KAAK,aAAa,SAASM,GAAI,MAAO,aAAe,CAACA,EAAEc,GAAId,EAAEe,IAAM,OAEvES,EACGjB,OAAO,QACPb,KAAK,SAAS,SAASM,GAAK,OAAOA,EAAEgB,GAAKhB,EAAEc,MAC5CpB,KAAK,UAAU,SAASM,GAAK,OAAOA,EAAEiB,GAAKjB,EAAEe,MAC7CrB,KAAK,OAAQ,QAEhB8B,EACGjB,OAAO,QACPb,KAAK,KAAM,GACXA,KAAK,KAAM,IACXA,KAAK,QAAS,QACdgC,MAAK,SAAS1B,GACb,GAAIA,EAAE2B,OAAS,EACb,OAAO3B,EAAEb,KAAKyB,QAIpB,IAAMgB,EAAgB,CAAC,cAAe,MAAO,KAAM,UAAW,gBAAiB,MAAO,iBAAkB,MAAO,cAAe,MAAO,cAOjIC,EALkBtC,IAAU,cAAcgB,OAAO,OAClDb,KAAK,KAAM,UACXA,KAAK,SAAU,KACfA,KAAK,QAAS,KAEYe,UAAU,WACxCtB,KAAKG,EAAMwC,UACXnB,QAAQJ,OAAO,KACfb,KAAK,QAAS,gBACdA,KAAK,aAAa,SAASM,EAAG+B,GAC7B,MAAO,kBAAoB,IAAU,GAAJA,GAAU,OAG7CF,EAAOtB,OAAO,QACbb,KAAK,IAAK,KACVA,KAAK,QAAS,IACdA,KAAK,SAAU,IACfA,KAAK,QAAS,eACdc,MAAM,QAAQ,SAAAR,GAAC,OAAIV,EAAMU,MAE1B6B,EAAOtB,OAAO,QACbb,KAAK,IAAK,KACVA,KAAK,IAAK,GACVA,KAAK,KAAM,SACXc,MAAM,cAAe,OACrBkB,MAAK,SAAC1B,EAAG+B,GAAJ,OAAUH,EAAcG,QCjJ9BC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.69ce4d54.chunk.js","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport './App.css';\nimport * as d3 from 'd3'\nimport legend from 'd3-svg-legend'\n\nfunction App() {\n  const svgRef = useRef();\n\n  useEffect(() => {\n    fetch(\"https://cdn.freecodecamp.org/testable-projects-fcc/data/tree_map/video-game-sales-data.json\")\n      .then(response => response.json())\n      .then(\n        (result) => {\n          renderD3(result, svgRef)\n        }\n      )\n  })\n\n  return (\n    <div className=\"container\">\n      <h1 id=\"title\">Video Game Sales</h1>\n      <h2 id=\"description\">Top 100 Most Sold Video Games Grouped by Platform</h2>\n      <svg ref={svgRef}>\n      </svg>\n    </div>\n  );\n}\n\nexport default App;\n\n\nconst renderD3 = (data, svg) => {\n  if (data.hasOwnProperty(\"name\")) {\n    // Height and Width for Canvas\n    let height = 600;\n    let width = 1200;\n\n\n    // Color Scale\n    let color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    // Creating the entire canvas\n    let chart = d3.select(svg.current)\n                  .attr(\"width\", width)\n                  .attr(\"height\", height);\n\n    let main = chart\n                   .attr(\"width\", width)\n                   .attr(\"height\", height)\n                   .attr(\"class\", \"main\");\n\n    // Making the treemap               \n    let treemapLayout = d3.treemap();\n\n    treemapLayout\n      .size([width, height])\n      .paddingOuter(0)\n\n\n    let root = d3.hierarchy(data)\n                 .sum(d => d.hasOwnProperty(\"value\") ? d.value : 0)\n                 .sort((a, b) => b.height - a.height || b.value - a.value);\n      \n    treemapLayout(root);\n      \n    let div = d3.select(\".container\").append('div')\n                        .attr(\"class\", \"tooltip\")\n                        .attr(\"id\", \"tooltip\")\n                        .style(\"opacity\", 0);\n      \n    main\n    .selectAll('rect')\n    .data(root.leaves())\n    .enter()\n    .append('rect')\n    .attr(\"class\", \"tile\")\n    .attr(\"data-name\", value => value.data.name)\n    .attr(\"data-category\", value => value.data.category ? value.data.category : 0)\n    .attr(\"data-value\", value => value.data.value ? value.data.value : 0)\n    .attr('x', function(d) { return d.x0; })\n    .attr('y', function(d) { return d.y0; })\n    .attr('width', function(d) { return d.x1 - d.x0; })\n    .attr('height', function(d) { return d.y1 - d.y0; })\n    .attr(\"fill\", value => value.parent ? color(value.parent.children) : null )\n    .attr(\"stroke\", \"white\")\n    .on(\"mouseover\", value => {\n      div.style(\"opacity\", 0.9)\n      div.html(value.data.name + \"<br/>\" + \n              \"Category: \" + value.data.category + \"<br/>\" +\n              \"Value: \" + value.data.value) \n          .style(\"left\", (d3.event.pageX) + \"px\")\n          .style(\"top\", (d3.event.pageY - 80) + \"px\");\n\n      div.attr(\"data-value\", value.data.value)\n    })\n    .on(\"mouseleave\", () => { div.style(\"opacity\", 0).style('top', 0)})\n\n\n    var nodes = d3.select(svg.current)\n    .selectAll('g')\n    .data(root.descendants())\n    .enter()\n    .append('g')\n    .attr('transform', function(d) {return 'translate(' + [d.x0, d.y0] + ')'})\n  \n  nodes\n    .append('rect')\n    .attr('width', function(d) { return d.x1 - d.x0; })\n    .attr('height', function(d) { return d.y1 - d.y0; })\n    .attr(\"fill\", \"none\")\n  \n  nodes\n    .append('text')\n    .attr('dx', 4)\n    .attr('dy', 14)\n    .attr(\"class\", \"game\")\n    .text(function(d) {\n      if (d.depth >= 2) {\n        return d.data.name;\n      }\n    });\n\n  const colorConsoles = [\"PC, XB, PSP\", \"Wii\", \"DS\", \"Xbox360\", \"GB, PS2 & PS4\", \"PS3\", \"SNES, NES, N64\", \"3DS\", \"Playstation\", \"GBA\", \"2600, XOne\"]\n\n  var legendContainer = d3.select(\".container\").append(\"svg\")\n    .attr(\"id\", \"legend\")\n    .attr(\"height\", 300)\n    .attr(\"width\", 200)\n\n  var legend = legendContainer.selectAll(\"#legend\")\n.data(color.domain())\n.enter().append(\"g\")\n.attr(\"class\", \"legend-label\")\n.attr(\"transform\", function(d, i) {\n  return \"translate(-40,\" + (240 - i * 20) + \")\";\n});\n\nlegend.append(\"rect\")\n.attr(\"x\", 200 - 18)\n.attr(\"width\", 18)\n.attr(\"height\", 18)\n.attr(\"class\", \"legend-item\")\n.style(\"fill\", d => color(d));\n\nlegend.append(\"text\")\n.attr(\"x\", 200 - 24)\n.attr(\"y\", 9)\n.attr(\"dy\", \".35em\")\n.style(\"text-anchor\", \"end\")\n.text((d, i) => colorConsoles[i])\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}